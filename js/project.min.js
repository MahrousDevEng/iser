var Project=Barba.BaseView.extend({namespace:"project",onLeave:function(){this.destroy()},onEnter:function(){this._construct()},onEnterCompleted:function(){this._initWaypoints(),this.start()},_waypoints:null,$header:null,_construct:function(){this.destroy(),this.$header=$(".js-project--header"),!this.$header.length},destroy:function(){if(this.$header=null,this._waypoints&&this._waypoints.length){for(var e in this._waypoints)this._waypoints[e].destroy();this._waypoints=null}},start:function(){var e=new TimelineLite;e.to(".project__header__scroll",.6,{y:0}).to(".project__header__scroll__text",.6,{y:0,ease:CubicBezier.get("custom-0.84")},"-=0.3")},_initWaypoints:function(){var e=this;app.resetWaypoints(),this._waypoints=$(".js-project--container").waypoint({offset:-250,handler:function(t){"down"===t?TweenLite.set(e.$header,{backgroundSize:"0"}):TweenLite.set(e.$header,{clearProps:"background-size"})}})}});Project.init();var ProjectToProjectTransition=BasicTransition.extend({exit:function(){var e=Barba.Utils.deferred(),t=$(".js-project--next");if(!t.length)return e.resolve(),e.promise;$clone=t.clone().addClass("cloned leaving").appendTo("body");var o=new TimelineLite({onComplete:function(){$clone.removeClass("leaving"),app.setHeaderColor("white"),e.resolve()}});o.set($clone,{top:t.offset().top-app._body_scrollTop}),o.to($clone,.8,{top:0,height:"100%",ease:CubicBezier.get("custom-0.74")},0),o.to($clone.find(".project__next__text"),.45,{yPercent:100,ease:CubicBezier.get("custom-0.74")},0);var r=$clone.data("color");return o.set(".doors-transition_top",{top:0,bottom:"auto"}).set(".doors-transition_bottom",{bottom:-1,top:"auto"}).set(".doors-transition",{backgroundColor:r,height:"50%"}),o.set(loader.$progressbar,{background:r,opacity:1,zIndex:9}).set(loader.$progressbar_inner,{backgroundColor:"rgba(255,255,255,0.5)"}),o.add(function(){app.setHeaderColor("white")},o.duration()-.3),e.promise},enter:function(){var e=$(".js-project--next.cloned"),t=e.data("color"),o=new TimelineLite({onComplete:this.done,onCompleteScope:this});o.set(this.newContainer,{autoAlpha:1}).set(loader.$progressbar_inner,{width:"100%"}).set(loader.$progressbar,{background:t}).fromTo(loader.$progressbar,1,{right:0,left:"auto",width:"100%"},{width:0,clearProps:"all",ease:CubicBezier.get("custom-0.66")}).set(loader.$progressbar_inner,{clearProps:"background"}).fromTo(".doors-transition",.8,{height:"50%"},{height:0,clearProps:"top, bottom, backgroundColor",ease:CubicBezier.get("custom-0.74")}).add(function(){e.remove()})},getColor:function(e){var t="#000";return"home"===e?t=Home.getColor():-1!==["contact","project","page"].indexOf(e)&&(t="#fff"),t}});