!function(t){"use strict";var e=function(e,s){this.el=t(e),this.options=t.extend({},t.fn.typed.defaults,s),this.isInput=this.el.is("input, textarea"),this.attr=this.options.attr,this.showCursor=this.isInput?!1:this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.stringsElement=this.options.stringsElement,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.cursorChar=this.options.cursorChar,this.shuffle=this.options.shuffle,this.sequence=[],this.build()};e.prototype={constructor:e,init:function(){var t=this;t.timeout=setTimeout(function(){for(var e=0;e<t.strings.length;++e)t.sequence[e]=e;t.shuffle&&(t.sequence=t.shuffleArray(t.sequence)),t.isInput&&t.el.focus(),t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos)},t.startDelay)},build:function(){var e=this;if(this.showCursor===!0&&(this.cursor=t('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.stringsElement){e.strings=[],this.stringsElement.hide();var s=this.stringsElement.find("p");t.each(s,function(s,i){e.strings.push(t(i).html())})}this.init()},typewrite:function(t,e){if(this.stop!==!0){var s=Math.round(70*Math.random())+this.typeSpeed,i=this;i.timeout=setTimeout(function(){var s=0,n=t.substr(e);if("^"===n.charAt(0)){var o=1;/^\^\d+/.test(n)&&(n=/\d+/.exec(n)[0],o+=n.length,s=parseInt(n)),t=t.substring(0,e)+t.substring(e+o)}if("html"===i.contentType){var r=t.substr(e).charAt(0);if("<"===r||"&"===r){var a="",u="";for(u="<"===r?">":";";t.substr(e).charAt(0)!==u;)a+=t.substr(e).charAt(0),e++;e++,a+=u}}i.timeout=setTimeout(function(){if(e===t.length){if(i.options.onStringTyped(i.arrayPos),i.arrayPos===i.strings.length-1&&(i.options.callback(),i.curLoop++,i.loop===!1||i.curLoop===i.loopCount))return;i.timeout=setTimeout(function(){i.backspace(t,e)},i.backDelay)}else{0===e&&i.options.preStringTyped(i.arrayPos);var s=t.substr(0,e+1);i.attr?i.el.attr(i.attr,s):i.isInput?i.el.val(s):"html"===i.contentType?i.el.html(s):i.el.text(s),e++,i.typewrite(t,e)}},s)},s)}},backspace:function(t,e){if(this.stop!==!0){var s=Math.round(70*Math.random())+this.backSpeed,i=this;i.timeout=setTimeout(function(){if("html"===i.contentType&&">"===t.substr(e).charAt(0)){for(var s="";"<"!==t.substr(e).charAt(0);)s-=t.substr(e).charAt(0),e--;e--,s+="<"}var n=t.substr(0,e);i.attr?i.el.attr(i.attr,n):i.isInput?i.el.val(n):"html"===i.contentType?i.el.html(n):i.el.text(n),e>i.stopNum?(e--,i.backspace(t,e)):e<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.shuffle&&(i.sequence=i.shuffleArray(i.sequence)),i.init()):i.typewrite(i.strings[i.sequence[i.arrayPos]],e))},s)}},shuffleArray:function(t){var e,s,i=t.length;if(i)for(;--i;)s=Math.floor(Math.random()*(i+1)),e=t[s],t[s]=t[i],t[i]=e;return t},reset:function(){var t=this;clearInterval(t.timeout);var e=this.el.attr("id");this.el.after('<span id="'+e+'"/>'),this.el.remove(),"undefined"!=typeof this.cursor&&this.cursor.remove(),t.options.resetCallback()}},t.fn.typed=function(s){return this.each(function(){var i=t(this),n=i.data("typed"),o="object"==typeof s&&s;n||i.data("typed",n=new e(this,o)),"string"==typeof s&&n[s]()})},t.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,shuffle:!1,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery),!function(t,e){if("function"==typeof define&&define.amd)define(["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var s={exports:{}};e(s.exports,s),t.autosize=s.exports}}(this,function(t,e){"use strict";function s(t){function e(){var e=window.getComputedStyle(t,null);p=e.overflowY,"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),d="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(d)&&(d=0),n()}function s(e){var s=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=s,p=e,c&&(t.style.overflowY=e),i()}function i(){var e=window.pageYOffset,s=document.body.scrollTop,i=t.style.height;t.style.height="auto";var n=t.scrollHeight+d;return 0===t.scrollHeight?void(t.style.height=i):(t.style.height=n+"px",f=t.clientWidth,document.documentElement.scrollTop=e,void(document.body.scrollTop=s))}function n(){var e=t.style.height;i();var n=window.getComputedStyle(t,null);if(n.height!==t.style.height?"visible"!==p&&s("visible"):"hidden"!==p&&s("hidden"),e!==t.style.height){var o=r("autosize:resized");t.dispatchEvent(o)}}var a=void 0===arguments[1]?{}:arguments[1],u=a.setOverflowX,l=void 0===u?!0:u,h=a.setOverflowY,c=void 0===h?!0:h;if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var d=null,p=null,f=t.clientWidth,y=function(){t.clientWidth!==f&&n()},v=function(e){window.removeEventListener("resize",y,!1),t.removeEventListener("input",n,!1),t.removeEventListener("keyup",n,!1),t.removeEventListener("autosize:destroy",v,!1),t.removeEventListener("autosize:update",n,!1),o["delete"](t),Object.keys(e).forEach(function(s){t.style[s]=e[s]})}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",v,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",n,!1),window.addEventListener("resize",y,!1),t.addEventListener("input",n,!1),t.addEventListener("autosize:update",n,!1),o.add(t),l&&(t.style.overflowX="hidden",t.style.wordWrap="break-word"),e()}}function i(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=r("autosize:destroy");t.dispatchEvent(e)}}function n(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=r("autosize:update");t.dispatchEvent(e)}}var o="function"==typeof Set?new Set:function(){var t=[];return{has:function(e){return Boolean(t.indexOf(e)>-1)},add:function(e){t.push(e)},"delete":function(e){t.splice(t.indexOf(e),1)}}}(),r=function(t){return new Event(t)};try{new Event("test")}catch(a){r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var u=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(u=function(t){return t},u.destroy=function(t){return t},u.update=function(t){return t}):(u=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return s(t,e)}),t},u.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],i),t},u.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],n),t}),e.exports=u});var Contact=Barba.BaseView.extend({namespace:"contact",onEnterCompleted:function(){this._construct()},onLeave:function(){this.destroy()},_waypoints:null,_began:!1,_default_msg:"",$el:null,_$textarea:null,_$submit:null,_$sent:null,_construct:function(){this.$el=$("#js-form-contact"),this.$el.length&&(this._$textarea=$("#js-form--textarea"),this._$submit=$(".js-form--submit").show().removeClass("active disabled invalid sending").attr("disabled",!0),this._$sent=$("#js-form--sent").removeAttr("style"),this._began=!1,this._default_msg="",this._initPlugins())},_initPlugins:function(){var t=this;autosize(this._$textarea),this._waypoints=this.$el.waypoint({offset:"bottom-in-view",handler:function(e){"down"!==e||t._began||t.typewrite()}}),this.$el.ajaxForm({beforeSubmit:function(e,s,i){var n=t.validate(t._$textarea.val());return t._$submit.toggleClass("invalid disabled",!n).attr("disabled",!n),n&&t.onSubmit(),n},data:{_wpcf7_is_ajax_call:1},dataType:"json",success:function(e,s,i,n){$.isPlainObject(e)&&!$.isEmptyObject(e)&&1==e.mailSent&&setTimeout(function(){t.onMailSent(e.message)},600)},error:function(t,e,s,i){var n=$('<div class="ajax-error"></div>').text(s.message);i.after(n)}})},_initEvents:function(){var t=this;this._$textarea.on("keyup."+this.namespace,function(e){var s=t._$textarea.val(),i=!0;(t._isEmpty(s)||t._isDefault(s))&&(i=!1),t._$submit.removeClass("invalid").toggleClass("disabled",!i).attr("disabled",!i)}),this.$el.on("click."+this.namespace+" tap."+this.namespace,function(e){t._$textarea.trigger("focus")})},destroy:function(){if(this.$el.length){if(this._waypoints&&this._waypoints.length)for(var t in this._waypoints)this._waypoints[t].destroy();this._$textarea.data("typed")&&clearInterval(this._$textarea.data("typed").timeout),this._$textarea.removeData("typed"),this._began=!1,this._default_msg=""}},typewrite:function(){var t=this;this._began=!0,this._default_msg=this._$textarea.data("strings").replace(/<br>/g,"\n"),this._$textarea.typed({strings:[this._default_msg],callback:function(){autosize.update(t._$textarea),t._initEvents(),t._$submit.addClass("active disabled")}})},_isEmpty:function(t){return 0===t.replace(/\s|\r\n|\r|\n/gm,"").length},_isDefault:function(t){var e=this._default_msg.replace(/\s|\r\n|\r|\n/gm,"");return t=t.replace(/\s|\r\n|\r|\n/gm,""),e.length===t.length&&e.toLocaleUpperCase()===t.toLocaleUpperCase()},_containsEmail:function(t){var e=/(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,s=t.match(e);return s?s[0]:!1},validate:function(t){return this._isEmpty(t)||this._isDefault(t)?!1:!!this._containsEmail(t)},onSubmit:function(){this._$submit.addClass("sending").attr("disabled",!0),this._$textarea.attr("readonly",!0),TweenLite.to(this._$textarea,.8,{height:0,ease:CubicBezier.get("custom-0.74")})},onMailSent:function(t){var e=this;console.log(t),this._$submit.addClass("sent"),TweenLite.set(this._$sent,{autoAlpha:1}),setTimeout(function(){e._$submit.hide(),e._$sent.typed({strings:[t],cursorChar:"",callback:function(){$(".typed-cursor").hide()}})},800)}});Contact.init();