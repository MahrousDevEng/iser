var Projects=Barba.BaseView.extend({namespace:"projects",onEnter:function(){this._construct()},onEnterCompleted:function(){this.start()},onLeave:function(){this.destroy()},_timeline_in:null,_construct:function(){TweenLite.set([".js-projects--title",".js-projects--item"],{opacity:0}),this._initEvents()},_initEvents:function(){var e=$(".js-projects--image").removeClass("show hidePrevious showNext");e.first().addClass("current"),$(document).on("mouseenter."+this.namespace,".js-projects--item",function(t){var s=$(this).find("a"),i=s.css("background-image");s.data("color");if(i){var o=e.filter(":not(.current)");o.length||(o=e.first()),o=o.first();var r=e.not(o);e.removeClass("current"),TweenLite.killTweensOf(e),TweenLite.to(".js-projects--images",.6,{opacity:.65}),o.addClass("current").css({"z-index":1,"background-image":i,opacity:1}),r.css({"z-index":2}),TweenLite.fromTo(r,.6,{opacity:1},{opacity:0})}}).on("mouseleave."+this.namespace,".js-projects--item",function(e){TweenLite.to(".js-projects--images",.6,{opacity:0})})},start:function(){this._timeline_in=new TimelineLite,this._timeline_in.staggerFromTo(".js-projects--title, .js-projects--item",.5,{opacity:0,x:-50},{opacity:1,x:0,ease:Power1.easeOut},.1)},destroy:function(){this._timeline_in.kill(),$(document).off("."+this.namespace);var e=Barba.Pjax.History.currentStatus(),t=$(".js-projects--item").filter(function(){return $(this).find("a").attr("href")===e.url});if(t.length){t.addClass("selected");var s=t.find("a"),i=$(".js-projects--image"),o=s.css("background-image");if(o){var r=i.filter(".current");r.length||(r=i.first()),r=r.first();var n=i.not(r);i.removeClass("current"),TweenLite.killTweensOf(i),r.addClass("current").css({"z-index":2,"background-image":o,opacity:1}),n.css({"z-index":1,opacity:0})}}}});Projects.init();var ProjectsToProjectTransition=HomeToProjectTransition.extend({exit:function(){var e=Barba.Utils.deferred(),t=new TimelineLite;t.add("shapes").to([".js-projects--title",".js-projects--item",loader.$progressbar],.5,{opacity:0},0).to(".js-projects--images",1,{opacity:1},0).set(this.oldContainer,{background:"none"});var s=document.getElementById("js-projects--mask").getBBox(),i=!0;$(".js-shape").each(function(e){var o;try{o=this.getBBox()}catch(r){i=!1,o=document.getElementById(this.id+"--clone").getBBox()}var n={x:o.x+o.width/2,y:o.y+o.height/2},a={x:s.width/2-n.x,y:s.height/2-n.y};i?t.to(this,.8,{transformOrigin:"50% 50%",x:-a.y,y:a.y,ease:CubicBezier.get("custom-0.74")},"shapes").to(this,.8,{transformOrigin:"50% 50%",x:a.x,ease:CubicBezier.get("custom-0.74")},"shapes+=0.8"):t.fromTo(this,.8,{attr:{transform:"matrix(1 0 0 1 0 0)"}},{attr:{transform:"matrix(1 0 0 1 "+a.y*-1+" "+a.y+")"},ease:CubicBezier.get("custom-0.74")},"shapes").to(this,.8,{attr:{transform:"matrix(1 0 0 1 "+a.x+" "+a.y+")"},ease:CubicBezier.get("custom-0.74")},"shapes+=0.8"),e&&t.set(this,{autoAlpha:0})});var o={force3D:!1,ease:CubicBezier.get("custom-0.74"),onStart:function(){e.resolve()}},r=10;if(i)o.scale=r;else{var n;try{n=$(".js-shape--top")[0].getBBox()}catch(a){n=document.getElementById("js-projects--shape-top--clone").getBBox()}var c={x:n.x+n.width/2,y:n.y+n.height/2};o.attr={transform:"matrix("+r+" 0 0 "+r+" "+(1-r)*c.x+" "+(1-r)*c.y+")"}}return t.to(".js-shape--top",.8,o,"-=0.15"),e.promise},enter:function(){var e=new TimelineLite({onComplete:this.done,onCompleteScope:this});e.set([this.oldContainer,this.newContainer],{position:"absolute",top:0,left:0,width:"100%"}).set(this.oldContainer,{zIndex:3}).set(this.newContainer,{autoAlpha:1}).to($(".js-projects--images",this.oldContainer),.8,{opacity:0,clearProps:"all"}).set(this.newContainer,{clearProps:"position, top, left, width"}).set(this.oldContainer,{clearProps:"background"})}});